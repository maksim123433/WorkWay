{% load static %}

<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WorkWay - Мой профиль</title>
    <link rel="stylesheet" href="{% static 'css/profileUser.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Градиентные волны -->
    <div class="gradient-wave wave-1"></div>
    <div class="gradient-wave wave-2"></div>
    <div class="gradient-wave wave-3"></div>

    <div class="container">
        <!-- Главный заголовок -->
        <header class="main-header">
            <div class="logo-container">
                <a href="{% url 'main' %}" class="logo-link">
                    <div class="logo-wrapper">
                        <div class="logo-icon">
                            <i class="fas fa-route"></i>
                        </div>
                        <div class="logo-text">
                            <h1 class="logo-title">
                                <span class="logo-highlight">Work</span><span class="logo-second">Way</span>
                            </h1>
                            <p class="logo-subtitle">Мой профиль</p>
                        </div>
                    </div>
                </a>
            </div>
            <div class="header-actions">
                <a href="{% url 'main' %}" class="back-btn">
                    <i class="fas fa-home"></i>
                    <span>На главную</span>
                </a>
                <a href="" class="btn-secondary logout-btn">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Выйти</span>
                </a>
            </div>
        </header>

        <div class="main-content">
            <div class="profile-container">
                <!-- Заголовок профиля -->
                <div class="profile-header">
                    <div class="profile-avatar">
                        <div class="avatar-circle">
                            {% if profile.account_type == 'job_seeker' %}
                                <i class="fas fa-user-graduate"></i>
                            {% else %}
                                <i class="fas fa-briefcase"></i>
                            {% endif %}
                        </div>
                        <div class="account-type-badge">
                            {% if profile.account_type == 'job_seeker' %}
                                <i class="fas fa-user-graduate"></i>
                                <span>Соискатель</span>
                            {% else %}
                                <i class="fas fa-briefcase"></i>
                                <span>Работодатель</span>
                            {% endif %}
                        </div>
                    </div>

                    <div class="profile-info">
                        <h1 class="profile-name">{{ profile.first_name }} {{ profile.last_name }}</h1>
                        <p class="profile-email">
                            <i class="fas fa-envelope"></i>
                            {{ profile.email }}
                        </p>

                        {% if profile.account_type == 'job_seeker' and profile.position %}
                        <div class="profile-position">
                            <i class="fas fa-bullseye"></i>
                            <span>{{ profile.position }}</span>
                        </div>
                        {% endif %}

                        {% if profile.account_type == 'employer' and profile.company_name %}
                        <div class="company-name">
                            <i class="fas fa-building"></i>
                            <span>{{ profile.company_name }}</span>
                        </div>
                        {% endif %}

                        {% if profile.city or profile.country %}
                        <div class="profile-location">
                            <i class="fas fa-map-marker-alt"></i>
                            <span>
                                {% if profile.city %}{{ profile.city }}{% endif %}
                                {% if profile.city and profile.country %}, {% endif %}
                                {% if profile.country %}{{ profile.country }}{% endif %}
                            </span>
                        </div>
                        {% endif %}
                    </div>

                    <div class="profile-actions">
                        <a href="" class="btn-primary edit-profile-btn">
                            <i class="fas fa-edit"></i>
                            <span>Редактировать профиль</span>
                        </a>
                    </div>
                </div>

                <!-- Основная информация профиля -->
                <div class="profile-content">
                    <!-- Левая колонка - Основная информация -->
                    <div class="profile-main">
                        <!-- Блок 1: Общая информация -->
                        <div class="info-section">
                            <div class="section-header">
                                <h3><i class="fas fa-user-circle"></i> Общая информация</h3>
                            </div>

                            <div class="info-grid">
                                {% if profile.phone %}
                                <div class="info-item">
                                    <div class="info-label">
                                        <i class="fas fa-phone"></i>
                                        <span>Телефон</span>
                                    </div>
                                    <div class="info-value">{{ profile.phone }}</div>
                                </div>
                                {% endif %}

                                {% if profile.citizenship %}
                                <div class="info-item">
                                    <div class="info-label">
                                        <i class="fas fa-passport"></i>
                                        <span>Гражданство</span>
                                    </div>
                                    <div class="info-value">{{ profile.citizenship }}</div>
                                </div>
                                {% endif %}

                                {% if profile.birth_date %}
                                <div class="info-item">
                                    <div class="info-label">
                                        <i class="fas fa-birthday-cake"></i>
                                        <span>Дата рождения</span>
                                    </div>
                                    <div class="info-value">{{ profile.birth_date|date:"d.m.Y" }}</div>
                                </div>
                                {% endif %}

                                {% if profile.gender %}
                                <div class="info-item">
                                    <div class="info-label">
                                        <i class="fas fa-venus-mars"></i>
                                        <span>Пол</span>
                                    </div>
                                    <div class="info-value">
                                        {% if profile.gender == 'male' %}Мужской
                                        {% elif profile.gender == 'female' %}Женский
                                        {% else %}{{ profile.gender }}{% endif %}
                                    </div>
                                </div>
                                {% endif %}

                                {% if profile.marital_status %}
                                <div class="info-item">
                                    <div class="info-label">
                                        <i class="fas fa-heart"></i>
                                        <span>Семейное положение</span>
                                    </div>
                                    <div class="info-value">
                                        {% if profile.marital_status == 'single' %}Холост/Не замужем
                                        {% elif profile.marital_status == 'married' %}Женат/Замужем
                                        {% elif profile.marital_status == 'divorced' %}Разведен(а)
                                        {% else %}{{ profile.marital_status }}{% endif %}
                                    </div>
                                </div>
                                {% endif %}
                            </div>
                        </div>

                        {% if profile.account_type == 'job_seeker' %}
                            <!-- Блок 2: Карьера для соискателя -->
                            <div class="info-section">
                                <div class="section-header">
                                    <h3><i class="fas fa-briefcase"></i> Карьера</h3>
                                </div>

                                <div class="info-grid">
                                    {% if profile.position %}
                                    <div class="info-item">
                                        <div class="info-label">
                                            <i class="fas fa-bullseye"></i>
                                            <span>Желаемая должность</span>
                                        </div>
                                        <div class="info-value">{{ profile.position }}</div>
                                    </div>
                                    {% endif %}

                                    {% if profile.experience %}
                                    <div class="info-item">
                                        <div class="info-label">
                                            <i class="fas fa-chart-line"></i>
                                            <span>Опыт работы</span>
                                        </div>
                                        <div class="info-value">{{ profile.experience }}</div>
                                    </div>
                                    {% endif %}

                                    {% if profile.employment_type %}
                                    <div class="info-item">
                                        <div class="info-label">
                                            <i class="fas fa-user-clock"></i>
                                            <span>Тип занятости</span>
                                        </div>
                                        <div class="info-value">
                                            {% if profile.employment_type == 'full' %}Полная занятость
                                            {% elif profile.employment_type == 'part' %}Частичная занятость
                                            {% elif profile.employment_type == 'project' %}Проектная работа
                                            {% elif profile.employment_type == 'volunteer' %}Волонтерство
                                            {% elif profile.employment_type == 'internship' %}Стажировка
                                            {% else %}{{ profile.employment_type }}{% endif %}
                                        </div>
                                    </div>
                                    {% endif %}

                                    {% if profile.work_schedule %}
                                    <div class="info-item">
                                        <div class="info-label">
                                            <i class="fas fa-calendar-alt"></i>
                                            <span>График работы</span>
                                        </div>
                                        <div class="info-value">
                                            {% if profile.work_schedule == 'full_day' %}Полный день
                                            {% elif profile.work_schedule == 'shift' %}Сменный график
                                            {% elif profile.work_schedule == 'flexible' %}Гибкий график
                                            {% elif profile.work_schedule == 'remote' %}Удаленная работа
                                            {% elif profile.work_schedule == 'rotation' %}Вахтовый метод
                                            {% else %}{{ profile.work_schedule }}{% endif %}
                                        </div>
                                    </div>
                                    {% endif %}

                                    {% if profile.relocation_ready %}
                                    <div class="info-item">
                                        <div class="info-label">
                                            <i class="fas fa-truck-moving"></i>
                                            <span>Готовность к переезду</span>
                                        </div>
                                        <div class="info-value">
                                            <span class="status-badge ready">
                                                <i class="fas fa-check"></i>
                                                <span>Готов к переезду</span>
                                            </span>
                                        </div>
                                    </div>
                                    {% endif %}

                                    {% if profile.business_trips_ready %}
                                    <div class="info-item">
                                        <div class="info-label">
                                            <i class="fas fa-plane"></i>
                                            <span>Командировки</span>
                                        </div>
                                        <div class="info-value">
                                            <span class="status-badge ready">
                                                <i class="fas fa-check"></i>
                                                <span>Готов к командировкам</span>
                                            </span>
                                        </div>
                                    </div>
                                    {% endif %}
                                </div>
                            </div>

                            <!-- Блок 3: Предыдущие должности -->
                            {% if profile.previous_positions %}
                            <div class="info-section">
                                <div class="section-header">
                                    <h3><i class="fas fa-history"></i> Предыдущие должности</h3>
                                </div>

                                <div class="positions-list">
                                    {% for position in profile.previous_positions %}
                                    <div class="position-card">
                                        <div class="position-header">
                                            <h4>{{ position.position }}</h4>
                                            <span class="position-period">{{ position.period }}</span>
                                        </div>
                                        <div class="position-company">
                                            <i class="fas fa-building"></i>
                                            <span>{{ position.company }}</span>
                                        </div>
                                        {% if position.description %}
                                        <div class="position-description">
                                            <p>{{ position.description }}</p>
                                        </div>
                                        {% endif %}
                                    </div>
                                    {% endfor %}
                                </div>
                            </div>
                            {% endif %}

                            <!-- Блок 4: Навыки и компетенции -->
                            <div class="info-section">
                                <div class="section-header">
                                    <h3><i class="fas fa-tools"></i> Навыки и компетенции</h3>
                                </div>

                                <div class="info-grid">
                                    {% if profile.skills %}
                                    <div class="info-item full-width">
                                        <div class="info-label">
                                            <i class="fas fa-star"></i>
                                            <span>Ключевые навыки</span>
                                        </div>
                                        <div class="info-value">
                                            <div class="skills-list">
                                                {% for skill in profile.skills.splitlines %}
                                                    {% if skill.strip %}
                                                    <span class="skill-tag">{{ skill.strip }}</span>
                                                    {% endif %}
                                                {% endfor %}
                                            </div>
                                        </div>
                                    </div>
                                    {% endif %}

                                    {% if profile.languages %}
                                    <div class="info-item full-width">
                                        <div class="info-label">
                                            <i class="fas fa-language"></i>
                                            <span>Иностранные языки</span>
                                        </div>
                                        <div class="info-value">{{ profile.languages|linebreaks }}</div>
                                    </div>
                                    {% endif %}

                                    {% if profile.achievements %}
                                    <div class="info-item full-width">
                                        <div class="info-label">
                                            <i class="fas fa-trophy"></i>
                                            <span>Достижения</span>
                                        </div>
                                        <div class="info-value">{{ profile.achievements|linebreaks }}</div>
                                    </div>
                                    {% endif %}
                                </div>
                            </div>

                            <!-- Блок 5: Образование и дополнительная информация -->
                            <div class="info-section">
                                <div class="section-header">
                                    <h3><i class="fas fa-graduation-cap"></i> Образование и дополнительная информация</h3>
                                </div>

                                <div class="info-grid">
                                    {% if profile.education %}
                                    <div class="info-item full-width">
                                        <div class="info-label">
                                            <i class="fas fa-university"></i>
                                            <span>Образование</span>
                                        </div>
                                        <div class="info-value">{{ profile.education|linebreaks }}</div>
                                    </div>
                                    {% endif %}

                                    {% if profile.driving_license %}
                                    <div class="info-item">
                                        <div class="info-label">
                                            <i class="fas fa-car"></i>
                                            <span>Водительские права</span>
                                        </div>
                                        <div class="info-value">
                                            <span class="status-badge ready">
                                                <i class="fas fa-check"></i>
                                                <span>Есть</span>
                                            </span>
                                            {% if profile.driver_license_category %}
                                            <span class="license-category">{{ profile.driver_license_category }}</span>
                                            {% endif %}
                                        </div>
                                    </div>
                                    {% endif %}

                                    {% if profile.portfolio_link or profile.github_url %}
                                    <div class="info-item full-width">
                                        <div class="info-label">
                                            <i class="fas fa-external-link-alt"></i>
                                            <span>Ссылки</span>
                                        </div>
                                        <div class="info-value">
                                            <div class="links-list">
                                                {% if profile.portfolio_link %}
                                                <a href="{{ profile.portfolio_link }}" target="_blank" class="link-item">
                                                    <i class="fas fa-folder-open"></i>
                                                    <span>Портфолио</span>
                                                </a>
                                                {% endif %}
                                                {% if profile.github_url %}
                                                <a href="{{ profile.github_url }}" target="_blank" class="link-item">
                                                    <i class="fab fa-github"></i>
                                                    <span>GitHub</span>
                                                </a>
                                                {% endif %}
                                            </div>
                                        </div>
                                    </div>
                                    {% endif %}

                                    {% if profile.about %}
                                    <div class="info-item full-width">
                                        <div class="info-label">
                                            <i class="fas fa-user-edit"></i>
                                            <span>О себе</span>
                                        </div>
                                        <div class="info-value">{{ profile.about|linebreaks }}</div>
                                    </div>
                                    {% endif %}
                                </div>
                            </div>

                        {% else %}
                            <!-- Блок 2: Информация о компании -->
                            <div class="info-section">
                                <div class="section-header">
                                    <h3><i class="fas fa-building"></i> Информация о компании</h3>
                                </div>

                                <div class="info-grid">
                                    {% if profile.company_name %}
                                    <div class="info-item">
                                        <div class="info-label">
                                            <i class="fas fa-building"></i>
                                            <span>Название компании</span>
                                        </div>
                                        <div class="info-value">{{ profile.company_name }}</div>
                                    </div>
                                    {% endif %}

                                    {% if profile.industry %}
                                    <div class="info-item">
                                        <div class="info-label">
                                            <i class="fas fa-industry"></i>
                                            <span>Сфера деятельности</span>
                                        </div>
                                        <div class="info-value">{{ profile.industry }}</div>
                                    </div>
                                    {% endif %}

                                    {% if profile.company_size %}
                                    <div class="info-item">
                                        <div class="info-label">
                                            <i class="fas fa-users"></i>
                                            <span>Количество сотрудников</span>
                                        </div>
                                        <div class="info-value">{{ profile.company_size }}</div>
                                    </div>
                                    {% endif %}

                                    {% if profile.company_website %}
                                    <div class="info-item">
                                        <div class="info-label">
                                            <i class="fas fa-globe"></i>
                                            <span>Веб-сайт</span>
                                        </div>
                                        <div class="info-value">
                                            <a href="{{ profile.company_website }}" target="_blank" class="company-link">
                                                {{ profile.company_website }}
                                            </a>
                                        </div>
                                    </div>
                                    {% endif %}

                                    {% if profile.company_address %}
                                    <div class="info-item full-width">
                                        <div class="info-label">
                                            <i class="fas fa-map-marker-alt"></i>
                                            <span>Адрес компании</span>
                                        </div>
                                        <div class="info-value">{{ profile.company_address|linebreaks }}</div>
                                    </div>
                                    {% endif %}

                                    {% if profile.company_description %}
                                    <div class="info-item full-width">
                                        <div class="info-label">
                                            <i class="fas fa-file-alt"></i>
                                            <span>О компании</span>
                                        </div>
                                        <div class="info-value">{{ profile.company_description|linebreaks }}</div>
                                    </div>
                                    {% endif %}
                                </div>
                            </div>
                        {% endif %}
                    </div>

                    <!-- Правая колонка - Быстрые действия и статистика -->
                    <div class="profile-sidebar">
                        <!-- Быстрые действия -->
                        <div class="quick-actions">
                            <h3><i class="fas fa-bolt"></i> Быстрые действия</h3>

                            {% if profile.account_type == 'job_seeker' %}
                                <a href="" class="quick-action-btn">
                                    <i class="fas fa-search"></i>
                                    <span>Найти вакансии</span>
                                </a>
                                <a href="" class="quick-action-btn">
                                    <i class="fas fa-file-upload"></i>
                                    <span>Обновить резюме</span>
                                </a>
                                <a href="#" class="quick-action-btn">
                                    <i class="fas fa-bell"></i>
                                    <span>Мои отклики</span>
                                </a>
                            {% else %}
                                <a href="{% url 'create_vacancy' %}" class="quick-action-btn">
                                    <i class="fas fa-plus"></i>
                                    <span>Создать вакансию</span>
                                </a>
                                <a href="{% url 'candidate_search' %}" class="quick-action-btn">
                                    <i class="fas fa-search"></i>
                                    <span>Найти кандидатов</span>
                                </a>
                                <a href="#" class="quick-action-btn">
                                    <i class="fas fa-bell"></i>
                                    <span>Отклики на вакансии</span>
                                </a>
                            {% endif %}


                        </div>

                        <!-- Информация об аккаунте -->
                        <div class="account-info">
                            <h3><i class="fas fa-user-circle"></i> Информация об аккаунте</h3>
                            <div class="info-list">
                                <div class="info-row">
                                    <span class="info-label">Тип аккаунта</span>
                                    <span class="info-value">
                                        {% if profile.account_type == 'job_seeker' %}
                                            Соискатель
                                        {% else %}
                                            Работодатель
                                        {% endif %}
                                    </span>
                                </div>
                                <div class="info-row">
                                    <span class="info-label">Дата регистрации</span>
                                    <span class="info-value">{{ profile.date_joined|date:"d.m.Y" }}</span>
                                </div>
                                <div class="info-row">
                                    <span class="info-label">Статус аккаунта</span>
                                    <span class="status-badge verified">
                                        <i class="fas fa-check-circle"></i>
                                        <span>Активен</span>
                                    </span>
                                </div>
                                <div class="info-row">
                                    <span class="info-label">Email подтвержден</span>
                                    <span class="status-badge verified">
                                        <i class="fas fa-check-circle"></i>
                                        <span>Да</span>
                                    </span>
                                </div>
                                <div class="info-row">
                                    <span class="info-label">Рассылка новостей</span>
                                    <span class="status-badge {% if profile.newsletter %}active{% else %}inactive{% endif %}">
                                        {% if profile.newsletter %}
                                            <i class="fas fa-bell"></i>
                                            <span>Подписан</span>
                                        {% else %}
                                            <i class="fas fa-bell-slash"></i>
                                            <span>Не подписан</span>
                                        {% endif %}
                                    </span>
                                </div>
                                <div class="info-row">
                                    <span class="info-label">Пользовательское соглашение</span>
                                    <span class="status-badge verified">
                                        <i class="fas fa-file-signature"></i>
                                        <span>Принято</span>
                                    </span>
                                </div>
                            </div>
                        </div>

                        <!-- Статистика -->
                        {% if profile.account_type == 'job_seeker' %}
                        <div class="stats-section">
                            <h3><i class="fas fa-chart-bar"></i> Моя активность</h3>
                            <div class="stats-grid">
                                <div class="stat-card">
                                    <div class="stat-icon sent">
                                        <i class="fas fa-paper-plane"></i>
                                    </div>
                                    <div class="stat-content">
                                        <div class="stat-number">0</div>
                                        <div class="stat-label">Отправлено откликов</div>
                                    </div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-icon viewed">
                                        <i class="fas fa-eye"></i>
                                    </div>
                                    <div class="stat-content">
                                        <div class="stat-number">0</div>
                                        <div class="stat-label">Просмотрено</div>
                                    </div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-icon invited">
                                        <i class="fas fa-handshake"></i>
                                    </div>
                                    <div class="stat-content">
                                        <div class="stat-number">0</div>
                                        <div class="stat-label">Приглашений</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {% endif %}

                        <!-- Полезные ссылки -->
                        <div class="useful-links">
                            <h3><i class="fas fa-link"></i> Полезные ссылки</h3>
                            <a href="#" class="link-item">
                                <i class="fas fa-question-circle"></i>
                                <span>Помощь и поддержка</span>
                            </a>
                            <a href="#" class="link-item">
                                <i class="fas fa-file-contract"></i>
                                <span>Условия использования</span>
                            </a>
                            <a href="#" class="link-item">
                                <i class="fas fa-shield-alt"></i>
                                <span>Безопасность аккаунта</span>
                            </a>
                            <a href="#" class="link-item">
                                <i class="fas fa-download"></i>
                                <span>Экспорт данных</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <footer>
            <div class="footer-content">
                <p>&copy; 2024 WorkWay. Все права защищены.</p>
                <div class="footer-links">
                    <a href="#">Политика конфиденциальности</a>
                    <a href="#">Условия использования</a>
                    <a href="#">Помощь</a>
                    <a href="#">О проекте</a>
                </div>
            </div>
        </footer>
    </div>

    <script src="{% static 'js/profileUser.js' %}"></script>
</body>
</html>